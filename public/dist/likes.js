!function(){"use strict";var e=e=>{if("object"==typeof localStorage)return localStorage.getItem(e);{const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:null}},t=(e,t)=>{if("object"==typeof localStorage)return localStorage.setItem(e,t);document.cookie=e+"="+t};const r="/wp-json/cbl-better-reviews/v1";async function n(e="",t={}){return(await fetch(e,{method:"POST",mode:"same-origin",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify(t)})).json()}var o=e=>{n(`${r}/like`,Array.isArray(e)?e:[e])},s=e=>{n(`${r}/unlike`,Array.isArray(e)?e:[e])};const i="better-reviews-likes",c="data-better-reviews-like",a="data-better-reviews-personal-likes",l="data-better-reviews-personal-likes-total",u="better-reviews__has-personally-liked",d="better-reviews__has-personal-likes";function v(){const e=!!f().length,t=f().length;document.querySelectorAll(`[${a}]`).forEach((t=>{e?t.classList.add(d):t.classList.remove(d)})),document.querySelectorAll(`[${l}]`).forEach((e=>{e.innerText=t}))}function f(){let t=e(i);return t?t.split(","):[]}function m(e){t(i,e)}function h(e){return f().includes(e)}function w(e){document.querySelectorAll(`[${c}="${e}"]`).forEach((e=>{e.classList.add(u)}))}function b(e){const t=e.target.closest(`[${c}]`).getAttribute(c);var r;h(t)?(r=t,m(f().filter((e=>e!=r))),function(e){document.querySelectorAll(`[${c}="${e}"]`).forEach((e=>{e.classList.remove(u)}))}(r),s(r)):function(e){const t=f();t.push(e),m(t),w(e),o(e)}(t),document.dispatchEvent(new CustomEvent("better-reviews:personal-like-total-changed"))}var p=function(){document.querySelectorAll(`[${c}]`).forEach((e=>{const t=e.getAttribute(c);t?(e.addEventListener("click",b,{passive:!0}),h(t)&&w(t)):console.warn(`better-reviews-like: id is missing from the ${c} attribute`)})),v(),document.addEventListener("better-reviews:personal-like-total-changed",v);const e=new CustomEvent("better-reviews:likes-ready");document.dispatchEvent(e)};window.addEventListener("DOMContentLoaded",(()=>{p()}))}();